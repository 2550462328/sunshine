#### 1. 集群如果有 3 台机器，挂掉 1 台集群还能工作吗？挂掉 2 台呢？

记住一个原则：过半存活即可用。所以挂掉 1 台可以继续工作，挂掉 2 台不可以工作。



#### 2. 集群支持动态添加机器吗？

在 3.5 版本开始，支持动态扩容。

而在 3.5 版本之前，Zookeeper 在这方面不太好。所以需要如下两种方式：

- 全部重启：关闭所有 Zookeeper 服务，修改配置之后启动。不影响之前客户端的会话。
- 逐个重启：顾名思义。这是比较常用的方式。



#### 3. 为什么 Zookeeper 集群推荐节点数是单数？

在统计投票时，有个过半的概念，大于集群机器数量的一半，即大于或等于(`n/2+1`)。那么我们来看看如下的统计：

| 集群数量 | 至少正常运行数量                 | 允许挂掉的数量 |
| :------- | :------------------------------- | :------------- |
| 2        | 2 的半数为 1，半数以上最少为 2   | 0              |
| 3        | 3 的半数为 1.5，半数以上最少为 2 | 1              |
| 4        | 4 的半数为 2，半数以上最少为 3   | 1              |
| 5        | 5 的半数为 2.5，半数以上最少为 3 | 2              |
| 6        | 6 的半数为 3，半数以上最少为 4   | 2              |

通过以上可以发现：

- 3 台服务器和 4 台服务器都最多允许 1 台服务器挂掉，5 台服务器和 6 台服务器都最多允许 2 台服务器挂掉，明显 4 台服务器成本高于 3 台服务器成本，6 台服务器成本高于 5 服务器成本。
- 这是由于半数以上投票通过决定的。所以，Zookeeper 集群推荐节点数是单数。

简单的来说，**节省资源**！