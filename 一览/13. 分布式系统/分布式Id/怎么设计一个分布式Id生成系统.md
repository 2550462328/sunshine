#### 1. 什么是分布式Id?

用于分布式系统中生成唯一的Id



在复杂分布式系统中，往往需要对大量的数据和消息进行唯一标识。如在美团点评的金融、支付、餐饮、酒店、猫眼电影等产品的系统中，数据日渐增长，对数据分库分表后需要有一个唯一ID来标识一条数据或消息，数据库的自增ID显然不能满足需求；特别一点的如订单、骑手、优惠券也都需要有唯一ID做标识。此时一个能够生成全局唯一ID的系统是非常必要的。



#### 2. 分布式Id生成有什么需求？

从**功能**上看

1. 全局唯一性：不能出现重复的ID号，既然是唯一标识，这是最基本的要求。
2. 趋势递增：在MySQL InnoDB引擎中使用的是聚集索引，由于多数RDBMS使用B-tree的数据结构来存储索引数据，在主键的选择上面我们应该尽量使用有序的主键保证写入性能。
3. 单调递增：保证下一个ID一定大于上一个ID，例如事务版本号、IM增量消息、排序等特殊需求。
4. 信息安全：如果ID是连续的，恶意用户的扒取工作就非常容易做了，直接按照顺序下载指定URL即可；如果是订单号就更危险了，竞对可以直接知道我们一天的单量。所以在一些应用场景下，会需要ID无规则、不规则。



#### 3. 在性能上

**1）平均延迟和TP999延迟都要尽可能低；**

TP999怎么计算？

![img](http://pcc.huitogo.club/0797441525d43e9f2c23b00520e4aff7)



可以认为TP999的意思是保证99.9%请求都能被响应的最小耗时



**2）可用性5个9；**

![img](http://pcc.huitogo.club/995ff51cb9000af1661f52f6171d3f1a)



**3）高QPS。**