#### 1. 优化思路

1）**分流**、**分流**、**分流**，重要的事情说三遍，再牛逼的机器也抵挡不住高级别的并发。

2）**限流**、**限流**、**限流**，毕竟秒杀商品有限，防刷的前提下没有绝对的公平，根据每个服务的负载能力，设定流量极限。

3）**缓存**、**缓存**、**缓存**、尽量不要让大量请求穿透到DB层，活动开始前商品信息可以推送至分布式缓存。

4）**异步**、**异步**、**异步**，分析并识别出可以异步处理的逻辑，比如日志，缩短系统响应时间。

5）**主备**、**主备**、**主备**，如果有条件做好主备容灾方案也是非常有必要的(参考某年锤子的活动被攻击)。



最后，为了支撑更高的并发，追求更好的性能，可以对服务器的部署模型进行优化，部分请求走正常的秒杀流程，部分请求直接返回秒杀失败，缺点是开发部署时需要维护两套逻辑。



#### 2. 分层优化

1）前端优化：活动开始前生成静态商品页面推送缓存和CDN，静态文件(JS/CSS)请求推送至文件服务器和CDN。

2）网络优化：如果是全国用户，最好是BGP多线机房，减少网络延迟。

3）应用服务优化：Nginx最佳配置、Tomcat连接池优化、数据库配置优化、数据库连接池优化。



#### 3. 压测检测

1）分析需压测业务场景涉及系统

2）协调各个压测系统资源并搭建压测环境

3）压测数据隔离以及监控(响应时间、吞吐量、错误率等数据以图表形式实时显示)

4）压测结果统计(平均响应时间、平均吞吐量等数据以图表形式在测试结束后显示)

5）优化单个系统性能、关联流程以及整个业务流程